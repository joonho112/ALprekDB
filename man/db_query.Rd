% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/db-core.R
\name{db_query}
\alias{db_query}
\title{Execute SQL Query on ALprekDB Database}
\usage{
db_query(conn, sql)
}
\arguments{
\item{conn}{A DBI connection object from \code{\link[=db_init]{db_init()}}.}

\item{sql}{Character. SQL query string.}
}
\value{
A tibble with the query results.
}
\description{
Executes an arbitrary SQL query and returns the result as a
tibble. Useful for custom aggregation, filtering, and analysis directly
in the database.
}
\examples{
\dontrun{
conn <- db_init("output/alprekdb.duckdb", read_only = TRUE)
result <- db_query(conn, "
  SELECT school_year, COUNT(*) as n,
         AVG(grand_total) as mean_budget
  FROM master_classroom
  GROUP BY school_year
  ORDER BY school_year
")
db_close(conn)
}

}
