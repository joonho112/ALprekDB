<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Package Architecture and Data Dictionary • ALprekDB</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Package Architecture and Data Dictionary">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ALprekDB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../manuscript.pdf"><span class="fa fa-file-pdf"></span> Paper</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/joonho112/ALprekDB" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Package Architecture and Data Dictionary</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/joonho112/ALprekDB/blob/main/vignettes/reference-architecture.Rmd" class="external-link"><code>vignettes/reference-architecture.Rmd</code></a></small>
      <div class="d-none name"><code>reference-architecture.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://joonho112.github.io/ALprekDB/">ALprekDB</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="s3-class-hierarchy">S3 Class Hierarchy<a class="anchor" aria-label="anchor" href="#s3-class-hierarchy"></a>
</h2>
<p>ALprekDB uses S3 classes to represent data at each processing stage.
Each class carries both the data and metadata (school year, format,
processing timestamps).</p>
<div class="section level3">
<h3 id="budget-pipeline">Budget Pipeline<a class="anchor" aria-label="anchor" href="#budget-pipeline"></a>
</h3>
<pre><code>budget_read()           --&gt; alprek_budget_raw
budget_clean()          --&gt; alprek_budget_long
budget_transform()      --&gt; alprek_budget_master
budget_validate()       --&gt; alprek_budget_validation
budget_bind_years()     --&gt; alprek_budget_panel</code></pre>
</div>
<div class="section level3">
<h3 id="classroom-pipeline">Classroom Pipeline<a class="anchor" aria-label="anchor" href="#classroom-pipeline"></a>
</h3>
<pre><code>classroom_read()        --&gt; alprek_classroom_raw
classroom_clean()       --&gt; alprek_classroom_clean
classroom_validate()    --&gt; alprek_classroom_validation
classroom_bind_years()  --&gt; alprek_classroom_panel</code></pre>
</div>
<div class="section level3">
<h3 id="student-pipeline">Student Pipeline<a class="anchor" aria-label="anchor" href="#student-pipeline"></a>
</h3>
<pre><code>student_read()          --&gt; alprek_student_raw
student_clean()         --&gt; alprek_student_clean
student_validate()      --&gt; alprek_student_validation
student_bind_years()    --&gt; alprek_student_panel
student_transform()     --&gt; alprek_student_panel (enriched, same class)</code></pre>
</div>
<div class="section level3">
<h3 id="linkage-pipeline">Linkage Pipeline<a class="anchor" aria-label="anchor" href="#linkage-pipeline"></a>
</h3>
<pre><code>linkage_classroom_budget()   --&gt; alprek_linkage_classroom
linkage_student_classroom()  --&gt; alprek_linkage_student
linkage_create_master()      --&gt; alprek_linkage_master
linkage_validate()           --&gt; alprek_linkage_validation</code></pre>
</div>
<div class="section level3">
<h3 id="database-layer">Database Layer<a class="anchor" aria-label="anchor" href="#database-layer"></a>
</h3>
<pre><code>db_init()           --&gt; DBI connection
db_write_panel()    --&gt; writes to DuckDB
db_write_master()   --&gt; writes to DuckDB
db_read_panel()     --&gt; reconstructs S3 panel object
db_read_master()    --&gt; reconstructs alprek_linkage_master</code></pre>
</div>
</div>
<div class="section level2">
<h2 id="s3-object-structure">S3 Object Structure<a class="anchor" aria-label="anchor" href="#s3-object-structure"></a>
</h2>
<p>All panel objects share a common structure:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">budget</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alprek_synthetic_budget.html">alprek_synthetic_budget</a></span><span class="op">(</span>n_classrooms <span class="op">=</span> <span class="fl">5</span>, n_years <span class="op">=</span> <span class="fl">2</span>, seed <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">budget</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "data"    "years"   "n_years" "by_year"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"$data: tibble with"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">budget</span><span class="op">$</span><span class="va">data</span><span class="op">)</span>, <span class="st">"rows x"</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">budget</span><span class="op">$</span><span class="va">data</span><span class="op">)</span>, <span class="st">"cols\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $data: tibble with 10 rows x 38 cols</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"$years:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">budget</span><span class="op">$</span><span class="va">years</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $years: 2021-2022, 2022-2023</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"$n_years:"</span>, <span class="va">budget</span><span class="op">$</span><span class="va">n_years</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $n_years: 2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"$by_year: list with per-year metadata\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $by_year: list with per-year metadata</span></span></code></pre></div>
<p>The <code>alprek_linkage_master</code> has a special two-level
structure:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># master$classroom_level   -- tibble (classroom-year level)</span></span>
<span><span class="co"># master$student_level     -- tibble (student-year level)</span></span>
<span><span class="co"># master$diagnostics       -- list of join diagnostics</span></span>
<span><span class="co"># master$meta              -- years, counts, timestamps</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="format-detection">Format Detection<a class="anchor" aria-label="anchor" href="#format-detection"></a>
</h2>
<p>ADECE changed file formats in 2024-25. ALprekDB auto-detects the
format:</p>
<table class="table">
<colgroup>
<col width="13%">
<col width="31%">
<col width="27%">
<col width="27%">
</colgroup>
<thead><tr class="header">
<th>Module</th>
<th>Legacy (2021-2024)</th>
<th>New (2024-2025)</th>
<th>Detection Method</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Budget</td>
<td>~176 columns, “Additional Funds 1/2”</td>
<td>~28 columns, “OSR/Other”</td>
<td>Column count + name pattern</td>
</tr>
<tr class="even">
<td>Classroom</td>
<td>~100 columns</td>
<td>~125 columns (seat count, DOBs)</td>
<td>Column count + “Seat Count” presence</td>
</tr>
<tr class="odd">
<td>Student</td>
<td>202 columns</td>
<td>270 columns (child names, GOLD Growth)</td>
<td>Column count + “Child First Name”</td>
</tr>
</tbody>
</table>
<p>Format-specific differences are handled transparently by the cleaning
functions.</p>
</div>
<div class="section level2">
<h2 id="data-dictionary">Data Dictionary<a class="anchor" aria-label="anchor" href="#data-dictionary"></a>
</h2>
<div class="section level3">
<h3 id="budget-panel-columns-53">Budget Panel Columns (53)<a class="anchor" aria-label="anchor" href="#budget-panel-columns-53"></a>
</h3>
<table class="table">
<colgroup>
<col width="37%">
<col width="45%">
<col width="17%">
</colgroup>
<thead><tr class="header">
<th>Column Group</th>
<th>Example Columns</th>
<th>Type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>Identifiers</strong></td>
<td>
<code>school_year</code>, <code>classroom_code</code>,
<code>classroom_name</code>
</td>
<td>factor/character</td>
</tr>
<tr class="even">
<td><strong>OSR Amounts</strong></td>
<td>
<code>osr_lead_teacher_salary</code>,
<code>osr_aux_teacher_benefits</code>, …</td>
<td>numeric</td>
</tr>
<tr class="odd">
<td><strong>Other Amounts</strong></td>
<td>
<code>other_lead_teacher_salary</code>,
<code>other_equipment</code>, …</td>
<td>numeric</td>
</tr>
<tr class="even">
<td><strong>Totals</strong></td>
<td>
<code>osr_total</code>, <code>other_total</code>,
<code>grand_total</code>
</td>
<td>numeric</td>
</tr>
<tr class="odd">
<td><strong>Shares</strong></td>
<td>
<code>share_osr</code>, <code>share_lt_salary</code>,
<code>share_teacher_compensation</code>
</td>
<td>numeric (0-1)</td>
</tr>
<tr class="even">
<td><strong>Delivery</strong></td>
<td>
<code>delivery_type</code>, <code>delivery_type_binary</code>,
<code>delivery_type_3way</code>
</td>
<td>factor</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="classroom-panel-columns-125">Classroom Panel Columns (125)<a class="anchor" aria-label="anchor" href="#classroom-panel-columns-125"></a>
</h3>
<table class="table">
<colgroup>
<col width="37%">
<col width="45%">
<col width="17%">
</colgroup>
<thead><tr class="header">
<th>Column Group</th>
<th>Example Columns</th>
<th>Type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>Identifiers</strong></td>
<td>
<code>classroom_code</code>, <code>school_year</code>,
<code>region</code>, <code>county_code</code>
</td>
<td>factor/character/integer</td>
</tr>
<tr class="even">
<td><strong>Delivery</strong></td>
<td>
<code>delivery_type</code> (7-level factor)</td>
<td>factor</td>
</tr>
<tr class="odd">
<td><strong>Geography</strong></td>
<td>
<code>latitude</code>, <code>longitude</code>,
<code>senate_dist</code>, <code>house_dist</code>
</td>
<td>numeric/integer</td>
</tr>
<tr class="even">
<td><strong>Funding</strong></td>
<td>
<code>total_grant</code>, <code>enhancement_grant</code>
</td>
<td>numeric</td>
</tr>
<tr class="odd">
<td><strong>Lead Teacher</strong></td>
<td>
<code>lead_tch_degree_level</code>, <code>lead_tch_race</code>,
<code>lead_tch_gender</code>, <code>lead_tch_total_exp</code>
</td>
<td>factor/integer</td>
</tr>
<tr class="even">
<td><strong>Aux Teacher</strong></td>
<td>
<code>aux_tch_degree_raw</code>, <code>aux_tch_race</code>,
<code>aux_tch_gender</code>
</td>
<td>factor/character</td>
</tr>
<tr class="odd">
<td><strong>Staff Contacts</strong></td>
<td>
<code>monitor_name</code>, <code>monitor_email</code>,
<code>coach_name</code>
</td>
<td>character</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="student-panel-columns-288-with-transform">Student Panel Columns (288, with transform)<a class="anchor" aria-label="anchor" href="#student-panel-columns-288-with-transform"></a>
</h3>
<table class="table">
<colgroup>
<col width="36%">
<col width="19%">
<col width="44%">
</colgroup>
<thead><tr class="header">
<th>Column Group</th>
<th>Count</th>
<th>Example Columns</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>Identifiers</strong></td>
<td>11</td>
<td>
<code>adece_id</code>, <code>classroom_code</code>,
<code>school_year</code>
</td>
</tr>
<tr class="even">
<td><strong>Demographics</strong></td>
<td>8</td>
<td>
<code>gender</code>, <code>race</code>, <code>ethnicity</code>,
<code>dob</code>, <code>age</code>
</td>
</tr>
<tr class="odd">
<td><strong>Family/Income</strong></td>
<td>10</td>
<td>
<code>poverty_dum</code>, <code>english_learner</code>,
<code>single_parent</code>, <code>gross_income_midpoint</code>
</td>
</tr>
<tr class="even">
<td><strong>Service Indicators</strong></td>
<td>15</td>
<td>
<code>childcare_subsidy</code>, <code>tanf</code>, <code>wic</code>,
<code>snap</code>, <code>iep</code>, <code>iep2</code>
</td>
</tr>
<tr class="odd">
<td><strong>Attendance</strong></td>
<td>6</td>
<td>
<code>days_absent_total</code>, <code>days_tardy_total</code>
</td>
</tr>
<tr class="even">
<td><strong>GOLD (6 domains)</strong></td>
<td>60</td>
<td>
<code>gold_literacy_fall_raw</code>,
<code>gold_math_spring_scale</code>,
<code>gold_se_fall_kready</code>
</td>
</tr>
<tr class="odd">
<td><strong>GOLD Gains</strong></td>
<td>18</td>
<td>
<code>gold_literacy_gain_raw</code>,
<code>gold_math_kready_improved</code>
</td>
</tr>
<tr class="even">
<td><strong>eDECA Pre/Post</strong></td>
<td>10+</td>
<td>
<code>edeca_initiative_pre_tscore</code>,
<code>edeca_tpf_gain</code>
</td>
</tr>
<tr class="odd">
<td><strong>Chronic Absence</strong></td>
<td>2</td>
<td>
<code>chronic_absence</code>, <code>chronic_absence_pct</code>
</td>
</tr>
<tr class="even">
<td><strong>Service Density</strong></td>
<td>2</td>
<td>
<code>n_services</code>, <code>risk_index</code>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="factor-level-reference">Factor Level Reference<a class="anchor" aria-label="anchor" href="#factor-level-reference"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">student</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alprek_synthetic_student.html">alprek_synthetic_student</a></span><span class="op">(</span>n_students <span class="op">=</span> <span class="fl">10</span>, n_classrooms <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                                     n_years <span class="op">=</span> <span class="fl">1</span>, seed <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"gender:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; gender: Male, Female</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"race:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">race</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; race: White, Black, Latino/Hispanic, Asian, Mixed, Other, Unknown</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"delivery_type:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">delivery_type</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; delivery_type: Public School, Private Child Care, Head Start, Community Organization, Faith-Based Organization, University Operated, Private School</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"GOLD WHE:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">gold_literacy_fall_whe</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; GOLD WHE: Below, Meet, Exceed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"GOLD K-Ready:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">gold_literacy_fall_kready</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; GOLD K-Ready: Emerging, Accomplished</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="column-naming-conventions">Column Naming Conventions<a class="anchor" aria-label="anchor" href="#column-naming-conventions"></a>
</h2>
<p>ALprekDB follows consistent naming patterns:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Pattern</th>
<th>Meaning</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>osr_*</code></td>
<td>OSR (state) funding amount</td>
<td><code>osr_lead_teacher_salary</code></td>
</tr>
<tr class="even">
<td><code>other_*</code></td>
<td>Other (non-state) funding</td>
<td><code>other_equipment</code></td>
</tr>
<tr class="odd">
<td><code>share_*</code></td>
<td>Proportion of grand total</td>
<td><code>share_osr</code></td>
</tr>
<tr class="even">
<td><code>gold_[domain]_[season]_*</code></td>
<td>GOLD assessment</td>
<td><code>gold_literacy_fall_raw</code></td>
</tr>
<tr class="odd">
<td><code>gold_[domain]_gain_*</code></td>
<td>Fall-to-spring change</td>
<td><code>gold_literacy_gain_scale</code></td>
</tr>
<tr class="even">
<td><code>edeca_[construct]_*</code></td>
<td>eDECA assessment</td>
<td><code>edeca_initiative_pre_tscore</code></td>
</tr>
<tr class="odd">
<td><code>lead_tch_*</code></td>
<td>Lead teacher attribute</td>
<td><code>lead_tch_degree_level</code></td>
</tr>
<tr class="even">
<td><code>aux_tch_*</code></td>
<td>Auxiliary teacher attribute</td>
<td><code>aux_tch_race</code></td>
</tr>
<tr class="odd">
<td><code>*_dum</code></td>
<td>Binary dummy (0/1)</td>
<td>
<code>poverty_dum</code>, <code>head_start_dum</code>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="validation-check-reference">Validation Check Reference<a class="anchor" aria-label="anchor" href="#validation-check-reference"></a>
</h2>
<div class="section level3">
<h3 id="budget-validation-7-checks">Budget Validation (7 checks)<a class="anchor" aria-label="anchor" href="#budget-validation-7-checks"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<code>required_columns</code> - Core columns exist</li>
<li>
<code>classroom_code_format</code> - Valid classroom code
format</li>
<li>
<code>positive_totals</code> - Grand totals &gt; 0</li>
<li>
<code>share_bounds</code> - Shares between 0 and 1</li>
<li>
<code>total_reconciliation</code> - OSR + Other = Grand Total
(within $1)</li>
<li>
<code>delivery_type_valid</code> - Known delivery types</li>
<li>
<code>school_year_consistent</code> - All rows same school year</li>
</ol>
</div>
<div class="section level3">
<h3 id="classroom-validation-10-checks">Classroom Validation (10 checks)<a class="anchor" aria-label="anchor" href="#classroom-validation-10-checks"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<code>required_columns</code> - Core columns exist</li>
<li>
<code>classroom_code_format</code> - Valid format</li>
<li>
<code>coordinate_range</code> - Alabama lat/lon bounds</li>
<li>
<code>delivery_type_valid</code> - Known delivery types</li>
<li>
<code>credential_valid</code> - Degree levels recognized</li>
<li>
<code>experience_range</code> - Teaching years [0, 50]</li>
<li>
<code>grant_positive</code> - Grant amounts &gt; 0</li>
<li>
<code>region_valid</code> - Regions 1-11</li>
<li>
<code>year_first_funded_range</code> - [1995, current year]</li>
<li>
<code>school_year_consistent</code> - Same school year</li>
</ol>
</div>
<div class="section level3">
<h3 id="student-validation-12-checks">Student Validation (12 checks)<a class="anchor" aria-label="anchor" href="#student-validation-12-checks"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<code>required_columns</code> - Core columns exist</li>
<li>
<code>adece_id_format</code> - ADECE IDs not all NA</li>
<li>
<code>student_unique</code> - No duplicate ADECE IDs</li>
<li>
<code>delivery_type_coverage</code> - All 7 types represented</li>
<li>
<code>gender_distribution</code> - Male/Female 40-60% range</li>
<li>
<code>missing_rates</code> - Key variables below thresholds</li>
<li>
<code>age_range</code> - Pre-K age [3, 7]</li>
<li>
<code>attendance_range</code> - [0, 180] days</li>
<li>
<code>income_parse_rate</code> - Income parsed &gt;= 70%</li>
<li>
<code>gold_completeness</code> - GOLD fall/spring &gt;= 80%</li>
<li>
<code>assessment_consistency</code> - Scale scores non-negative</li>
<li>
<code>school_year_consistent</code> - Same school year</li>
</ol>
</div>
<div class="section level3">
<h3 id="linkage-validation-8-checks">Linkage Validation (8 checks)<a class="anchor" aria-label="anchor" href="#linkage-validation-8-checks"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<code>required_columns</code> - Join keys exist</li>
<li>
<code>key_uniqueness</code> - No duplicate keys at classroom
level</li>
<li>
<code>match_rate</code> - Join coverage &gt;= 95%</li>
<li>
<code>orphan_count</code> - Unmatched rows reported</li>
<li>
<code>na_introduced</code> - Unexpected NAs from join</li>
<li>
<code>year_coverage</code> - All expected years present</li>
<li>
<code>row_count_consistency</code> - Row counts as expected</li>
<li>
<code>region_consistency</code> - Region values match across
modules</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="extending-the-package">Extending the Package<a class="anchor" aria-label="anchor" href="#extending-the-package"></a>
</h2>
<div class="section level3">
<h3 id="adding-a-new-years-data">Adding a New Year’s Data<a class="anchor" aria-label="anchor" href="#adding-a-new-years-data"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Process the new year</span></span>
<span><span class="va">config_2526</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/student_config.html">student_config</a></span><span class="op">(</span><span class="st">"2025-2026"</span>, <span class="st">"Student_25-26.xlsx"</span><span class="op">)</span></span>
<span><span class="va">result_2526</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/student_process.html">student_process</a></span><span class="op">(</span><span class="va">config_2526</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Add to existing DuckDB database</span></span>
<span><span class="va">conn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/db_init.html">db_init</a></span><span class="op">(</span><span class="st">"output/alprekdb.duckdb"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/db_write_year.html">db_write_year</a></span><span class="op">(</span><span class="va">conn</span>, <span class="va">result_2526</span><span class="op">$</span><span class="va">clean</span>, table <span class="op">=</span> <span class="st">"student_panel"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/db_close.html">db_close</a></span><span class="op">(</span><span class="va">conn</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="classroom-code-structure">Classroom Code Structure<a class="anchor" aria-label="anchor" href="#classroom-code-structure"></a>
</h3>
<p>Classroom codes encode organizational structure. Use
<code><a href="../reference/parse_classroom_codes.html">parse_classroom_codes()</a></code> for analysis:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"001P12345.01"</span>, <span class="st">"067H54321.02"</span>, <span class="st">"033C98765.03"</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parse_classroom_codes.html">parse_classroom_codes</a></span><span class="op">(</span><span class="va">codes</span><span class="op">)</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 5</span></span></span>
<span><span class="co">#&gt;   county_code delivery_type_code program_code class_num delivery_type     </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 001         P                  12345        01        Public School     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 067         H                  54321        02        Head Start        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 033         C                  98765        03        Private Child Care</span></span></code></pre></div>
<p>The delivery type code maps to:</p>
<table class="table">
<thead><tr class="header">
<th>Code</th>
<th>Delivery Type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>P</td>
<td>Public School</td>
</tr>
<tr class="even">
<td>C</td>
<td>Community Organization</td>
</tr>
<tr class="odd">
<td>H</td>
<td>Head Start</td>
</tr>
<tr class="even">
<td>O</td>
<td>Faith-Based Organization</td>
</tr>
<tr class="odd">
<td>F</td>
<td>University Operated</td>
</tr>
<tr class="even">
<td>U</td>
<td>Private School</td>
</tr>
<tr class="odd">
<td>S</td>
<td>Private Child Care</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://orcid.org/0009-0006-4019-8703" class="external-link">JoonHo Lee</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
