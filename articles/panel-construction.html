<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Building Multi-Year Panel Data • ALprekDB</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Building Multi-Year Panel Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ALprekDB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/joonho112/ALprekDB" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Building Multi-Year Panel Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/joonho112/ALprekDB/blob/main/vignettes/panel-construction.Rmd" class="external-link"><code>vignettes/panel-construction.Rmd</code></a></small>
      <div class="d-none name"><code>panel-construction.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>ALprekDB processes 4 years of ADECE Pre-K administrative data
(2021-22 through 2024-25) into longitudinal panel datasets. This
vignette demonstrates the multi-year processing pipeline using synthetic
data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://joonho112.github.io/ALprekDB/">ALprekDB</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-synthetic-panel-data">Creating Synthetic Panel Data<a class="anchor" aria-label="anchor" href="#creating-synthetic-panel-data"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate 3-year panel data for all modules</span></span>
<span><span class="va">budget</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alprek_synthetic_budget.html">alprek_synthetic_budget</a></span><span class="op">(</span>n_classrooms <span class="op">=</span> <span class="fl">15</span>, n_years <span class="op">=</span> <span class="fl">3</span>, seed <span class="op">=</span> <span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">classroom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alprek_synthetic_classroom.html">alprek_synthetic_classroom</a></span><span class="op">(</span>n_classrooms <span class="op">=</span> <span class="fl">15</span>, n_years <span class="op">=</span> <span class="fl">3</span>, seed <span class="op">=</span> <span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">student</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alprek_synthetic_student.html">alprek_synthetic_student</a></span><span class="op">(</span>n_students <span class="op">=</span> <span class="fl">60</span>, n_classrooms <span class="op">=</span> <span class="fl">15</span>,</span>
<span>                                     n_years <span class="op">=</span> <span class="fl">3</span>, seed <span class="op">=</span> <span class="fl">42</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="budget-panel">Budget Panel<a class="anchor" aria-label="anchor" href="#budget-panel"></a>
</h2>
<div class="section level3">
<h3 id="structure">Structure<a class="anchor" aria-label="anchor" href="#structure"></a>
</h3>
<p>The budget panel contains per-classroom funding data across
years:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">budget</span></span>
<span><span class="co">#&gt; &lt;alprek_budget_panel&gt;</span></span>
<span><span class="co">#&gt;   Years: 2021-2022, 2022-2023, 2023-2024 </span></span>
<span><span class="co">#&gt;   Total rows: 45 </span></span>
<span><span class="co">#&gt;      2021-2022 : 15 classrooms ( legacy )</span></span>
<span><span class="co">#&gt;      2022-2023 : 15 classrooms ( legacy )</span></span>
<span><span class="co">#&gt;      2023-2024 : 15 classrooms ( legacy )</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">budget</span><span class="op">$</span><span class="va">data</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>, give.attr <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [45 × 10] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ school_year         : Factor w/ 3 levels "2021-2022","2022-2023",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ year                : int [1:45] 2021 2021 2021 2021 2021 2021 2021 2021 2021 2021 ...</span></span>
<span><span class="co">#&gt;  $ classroom_code      : chr [1:45] "003U46939.01" "005U71147.02" "018H74409.02" "020H10102.02" ...</span></span>
<span><span class="co">#&gt;  $ classroom_name      : chr [1:45] "Classroom 11" "Classroom 15" "Classroom 4" "Classroom 9" ...</span></span>
<span><span class="co">#&gt;  $ county_code         : chr [1:45] "003" "005" "018" "020" ...</span></span>
<span><span class="co">#&gt;  $ delivery_type       : Factor w/ 7 levels "Public School",..: 6 6 3 3 2 4 7 4 4 6 ...</span></span>
<span><span class="co">#&gt;  $ delivery_type_binary: Factor w/ 2 levels "Public","Non-Public": 2 2 2 2 2 2 2 2 2 2 ...</span></span>
<span><span class="co">#&gt;  $ delivery_type_3way  : Factor w/ 3 levels "Public","Private",..: 2 2 3 3 2 2 2 2 2 2 ...</span></span>
<span><span class="co">#&gt;  $ program_code        : chr [1:45] "46939" "71147" "74409" "10102" ...</span></span>
<span><span class="co">#&gt;  $ class_num           : chr [1:45] "01" "02" "02" "02" ...</span></span></code></pre></div>
<p>Each row represents one classroom-year with 38 columns spanning OSR
and Other funding sources.</p>
</div>
<div class="section level3">
<h3 id="year-over-year-trends">Year-over-Year Trends<a class="anchor" aria-label="anchor" href="#year-over-year-trends"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">budget_stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/budget_summary_stats.html">budget_summary_stats</a></span><span class="op">(</span><span class="va">budget</span><span class="op">)</span></span>
<span><span class="va">budget_stats</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"school_year"</span>, <span class="st">"n"</span>, <span class="st">"grand_total_mean"</span>,</span>
<span>                  <span class="st">"grand_total_median"</span>, <span class="st">"share_osr_mean"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 5</span></span></span>
<span><span class="co">#&gt;   school_year     n grand_total_mean grand_total_median share_osr_mean</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2021-2022      15           <span style="text-decoration: underline;">93</span>443.              <span style="text-decoration: underline;">93</span>742          0.970</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2022-2023      15           <span style="text-decoration: underline;">90</span>839               <span style="text-decoration: underline;">90</span>812          0.970</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2023-2024      15           <span style="text-decoration: underline;">93</span>425.              <span style="text-decoration: underline;">94</span>581          0.969</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="tracking-classrooms-across-years">Tracking Classrooms Across Years<a class="anchor" aria-label="anchor" href="#tracking-classrooms-across-years"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tracking</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/budget_track_classrooms.html">budget_track_classrooms</a></span><span class="op">(</span><span class="va">budget</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tracking</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 8</span></span></span>
<span><span class="co">#&gt;   classroom_code delivery_type   county_code `2021-2022` `2022-2023` `2023-2024`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 003U46939.01   University Ope… 003         TRUE        TRUE        TRUE       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 005U71147.02   University Ope… 005         TRUE        TRUE        TRUE       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 018H74409.02   Head Start      018         TRUE        TRUE        TRUE       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 020H10102.02   Head Start      020         TRUE        TRUE        TRUE       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 024C84742.02   Private Child … 024         TRUE        TRUE        TRUE       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 025O43712.02   Community Orga… 025         TRUE        TRUE        TRUE       </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: n_years_present &lt;dbl&gt;, all_years &lt;lgl&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="classroom-panel">Classroom Panel<a class="anchor" aria-label="anchor" href="#classroom-panel"></a>
</h2>
<div class="section level3">
<h3 id="structure-1">Structure<a class="anchor" aria-label="anchor" href="#structure-1"></a>
</h3>
<p>The classroom panel includes classroom characteristics, teacher
demographics, and geographic coordinates:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">classroom</span></span>
<span><span class="co">#&gt; &lt;alprek_classroom_panel&gt;</span></span>
<span><span class="co">#&gt;   Years: 2021-2022, 2022-2023, 2023-2024 </span></span>
<span><span class="co">#&gt;   Total observations: 45 </span></span>
<span><span class="co">#&gt;   Columns: 44 </span></span>
<span><span class="co">#&gt;      2021-2022 : 15 classrooms ( legacy )</span></span>
<span><span class="co">#&gt;      2022-2023 : 15 classrooms ( legacy )</span></span>
<span><span class="co">#&gt;      2023-2024 : 15 classrooms ( legacy )</span></span></code></pre></div>
<p>Key column groups:</p>
<ul>
<li>
<strong>Identifiers</strong>: <code>classroom_code</code>,
<code>school_year</code>, <code>region</code>,
<code>county_code</code>
</li>
<li>
<strong>Delivery</strong>: <code>delivery_type</code> (7
categories)</li>
<li>
<strong>Geography</strong>: <code>latitude</code>,
<code>longitude</code>
</li>
<li>
<strong>Teacher Demographics</strong>: <code>lead_tch_race</code>,
<code>lead_tch_gender</code>, credentials</li>
<li>
<strong>Funding</strong>: <code>total_grant</code>,
<code>enhancement_grant</code>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="format-detection">Format Detection<a class="anchor" aria-label="anchor" href="#format-detection"></a>
</h3>
<p>ADECE changed the Excel format in 2024-25. ALprekDB auto-detects the
format:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Legacy format (2021-2024): ~100 columns</span></span>
<span><span class="co"># New format (2024-2025): ~125 columns with additional staff DOBs, seat counts</span></span>
<span><span class="va">raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classroom_read.html">classroom_read</a></span><span class="op">(</span><span class="st">"FCPK_Classroom_24-25.xlsx"</span><span class="op">)</span></span>
<span><span class="va">raw</span><span class="op">$</span><span class="va">meta</span><span class="op">$</span><span class="va">format</span>  <span class="co"># "new"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="imputation">Imputation<a class="anchor" aria-label="anchor" href="#imputation"></a>
</h3>
<p>The classroom panel applies forward-fill imputation for geographic
coordinates and <code>year_first_funded</code> within site groups. The
imputation log records every change:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">classroom</span><span class="op">$</span><span class="va">imputation_log</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 0 × 5</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 variables: classroom_code &lt;chr&gt;, school_year &lt;chr&gt;, variable &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   imputed_value &lt;chr&gt;, method &lt;chr&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="student-panel">Student Panel<a class="anchor" aria-label="anchor" href="#student-panel"></a>
</h2>
<div class="section level3">
<h3 id="structure-2">Structure<a class="anchor" aria-label="anchor" href="#structure-2"></a>
</h3>
<p>The student panel is the largest dataset with 145 columns per
student-year:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">student</span></span>
<span><span class="co">#&gt; &lt;alprek_student_panel&gt;</span></span>
<span><span class="co">#&gt;   Years: 2021-2022, 2022-2023, 2023-2024 </span></span>
<span><span class="co">#&gt;   Total observations: 180 </span></span>
<span><span class="co">#&gt;   Unique students: 180 </span></span>
<span><span class="co">#&gt;   Columns: 145 </span></span>
<span><span class="co">#&gt;      2021-2022 : 60 students ( legacy , 145 cols)</span></span>
<span><span class="co">#&gt;      2022-2023 : 60 students ( legacy , 145 cols)</span></span>
<span><span class="co">#&gt;      2023-2024 : 60 students ( legacy , 145 cols)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="demographic-distribution">Demographic Distribution<a class="anchor" aria-label="anchor" href="#demographic-distribution"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Gender distribution</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Male Female </span></span>
<span><span class="co">#&gt;     96     84</span></span>
<span></span>
<span><span class="co"># Race distribution</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">race</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;           White           Black Latino/Hispanic           Asian           Mixed </span></span>
<span><span class="co">#&gt;              67              59              21               6              14 </span></span>
<span><span class="co">#&gt;           Other         Unknown </span></span>
<span><span class="co">#&gt;               2              11</span></span>
<span></span>
<span><span class="co"># Poverty rate by year</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">poverty_dum</span>, <span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">school_year</span>, <span class="va">mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; 2021-2022 2022-2023 2023-2024 </span></span>
<span><span class="co">#&gt; 0.5666667 0.5500000 0.7000000</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="assessment-scores-gold">Assessment Scores (GOLD)<a class="anchor" aria-label="anchor" href="#assessment-scores-gold"></a>
</h3>
<p>GOLD assessments cover 6 developmental domains, each measured in fall
and spring:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gold_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^gold_literacy"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">)</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">gold_cols</span></span>
<span><span class="co">#&gt;  [1] "gold_literacy_fall_raw"        "gold_literacy_fall_scale"     </span></span>
<span><span class="co">#&gt;  [3] "gold_literacy_fall_whe"        "gold_literacy_fall_nn"        </span></span>
<span><span class="co">#&gt;  [5] "gold_literacy_fall_kready"     "gold_literacy_spring_raw"     </span></span>
<span><span class="co">#&gt;  [7] "gold_literacy_spring_scale"    "gold_literacy_spring_whe"     </span></span>
<span><span class="co">#&gt;  [9] "gold_literacy_spring_nn"       "gold_literacy_spring_kready"  </span></span>
<span><span class="co">#&gt; [11] "gold_literacy_gain_raw"        "gold_literacy_gain_scale"     </span></span>
<span><span class="co">#&gt; [13] "gold_literacy_kready_improved"</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Literacy fall vs spring raw scores</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">gold_literacy_fall_raw</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span></span>
<span><span class="co">#&gt;   15.00   26.00   38.50   39.55   54.00   65.00      12</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">gold_literacy_spring_raw</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span></span>
<span><span class="co">#&gt;    21.0    38.0    50.0    50.6    65.0    82.0      12</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="derived-variables">Derived Variables<a class="anchor" aria-label="anchor" href="#derived-variables"></a>
</h3>
<p>The student panel includes derived variables from
<code><a href="../reference/student_transform.html">student_transform()</a></code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># GOLD gain scores</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">gold_literacy_gain_raw</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span></span>
<span><span class="co">#&gt;    3.00    7.00   11.00   11.04   15.25   20.00      12</span></span>
<span></span>
<span><span class="co"># Chronic absence rate</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">chronic_absence</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.01666667</span></span>
<span></span>
<span><span class="co"># Service density</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">n_services</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   0.000   2.000   3.000   2.628   3.000   5.000</span></span>
<span></span>
<span><span class="co"># Risk index</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">student</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">risk_index</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  0  1  2  3 </span></span>
<span><span class="co">#&gt; 29 70 61 20</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="real-data-pipeline">Real Data Pipeline<a class="anchor" aria-label="anchor" href="#real-data-pipeline"></a>
</h2>
<p>With actual ADECE files, the multi-year processing uses the
<code>config</code> + <code>process_years</code> pattern:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Budget: 4-year pipeline</span></span>
<span><span class="va">budget_configs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/budget_config.html">budget_config</a></span><span class="op">(</span><span class="st">"2021-2022"</span>, <span class="st">"Budget_21-22.xlsx"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/budget_config.html">budget_config</a></span><span class="op">(</span><span class="st">"2022-2023"</span>, <span class="st">"Budget_22-23.xlsx"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/budget_config.html">budget_config</a></span><span class="op">(</span><span class="st">"2023-2024"</span>, <span class="st">"Budget_23-24.xlsx"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/budget_config.html">budget_config</a></span><span class="op">(</span><span class="st">"2024-2025"</span>, <span class="st">"Budget_24-25.xlsx"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">budget_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/budget_process_years.html">budget_process_years</a></span><span class="op">(</span><span class="va">budget_configs</span><span class="op">)</span></span>
<span><span class="va">budget_panel</span> <span class="op">&lt;-</span> <span class="va">budget_result</span><span class="op">$</span><span class="va">panel</span>  <span class="co"># 5,867 rows x 53 cols</span></span>
<span></span>
<span><span class="co"># Classroom: 4-year pipeline</span></span>
<span><span class="va">classroom_configs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/classroom_config.html">classroom_config</a></span><span class="op">(</span><span class="st">"2021-2022"</span>, <span class="st">"Classroom_21-22.xlsx"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/classroom_config.html">classroom_config</a></span><span class="op">(</span><span class="st">"2022-2023"</span>, <span class="st">"Classroom_22-23.xlsx"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/classroom_config.html">classroom_config</a></span><span class="op">(</span><span class="st">"2023-2024"</span>, <span class="st">"Classroom_23-24.xlsx"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/classroom_config.html">classroom_config</a></span><span class="op">(</span><span class="st">"2024-2025"</span>, <span class="st">"Classroom_24-25.xlsx"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">classroom_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classroom_process_years.html">classroom_process_years</a></span><span class="op">(</span><span class="va">classroom_configs</span><span class="op">)</span></span>
<span><span class="va">classroom_panel</span> <span class="op">&lt;-</span> <span class="va">classroom_result</span><span class="op">$</span><span class="va">panel</span>  <span class="co"># 5,888 rows x 125 cols</span></span>
<span></span>
<span><span class="co"># Student: 4-year pipeline + transform</span></span>
<span><span class="va">student_configs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/student_config.html">student_config</a></span><span class="op">(</span><span class="st">"2021-2022"</span>, <span class="st">"Student_21-22.xlsx"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/student_config.html">student_config</a></span><span class="op">(</span><span class="st">"2022-2023"</span>, <span class="st">"Student_22-23.xlsx"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/student_config.html">student_config</a></span><span class="op">(</span><span class="st">"2023-2024"</span>, <span class="st">"Student_23-24.xlsx"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/student_config.html">student_config</a></span><span class="op">(</span><span class="st">"2024-2025"</span>, <span class="st">"Student_24-25.xlsx"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">student_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/student_process_years.html">student_process_years</a></span><span class="op">(</span><span class="va">student_configs</span><span class="op">)</span></span>
<span><span class="va">student_panel</span> <span class="op">&lt;-</span> <span class="va">student_result</span><span class="op">$</span><span class="va">panel</span>  <span class="co"># 92,507 rows x 261 cols</span></span>
<span></span>
<span><span class="co"># Apply transform enrichment (27 derived variables)</span></span>
<span><span class="va">enriched_panel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/student_transform.html">student_transform</a></span><span class="op">(</span><span class="va">student_panel</span><span class="op">)</span></span>
<span><span class="co"># 92,507 rows x 288 cols</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="validation-framework">Validation Framework<a class="anchor" aria-label="anchor" href="#validation-framework"></a>
</h2>
<p>Each module has a validation step with multiple checks:</p>
<table class="table">
<thead><tr class="header">
<th>Module</th>
<th># Checks</th>
<th>Key Checks</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Budget</td>
<td>7</td>
<td>Reconciliation, totals, share bounds</td>
</tr>
<tr class="even">
<td>Classroom</td>
<td>10</td>
<td>Coordinates, credentials, delivery types</td>
</tr>
<tr class="odd">
<td>Student</td>
<td>12</td>
<td>Demographics, assessments, attendance</td>
</tr>
<tr class="even">
<td>Linkage</td>
<td>8</td>
<td>Match rates, orphans, key uniqueness</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Validation returns check-level results</span></span>
<span><span class="va">validation</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/student_validate.html">student_validate</a></span><span class="op">(</span><span class="va">clean_obj</span>, strict <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">validation</span><span class="op">$</span><span class="va">checks</span>  <span class="co"># tibble of check results</span></span>
<span><span class="va">validation</span><span class="op">$</span><span class="va">n_errors</span></span>
<span><span class="va">validation</span><span class="op">$</span><span class="va">n_warnings</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<ul>
<li>
<strong>Linkage</strong>: See
<code><a href="../articles/linkage-and-analysis.html">vignette("linkage-and-analysis")</a></code> for joining these three
panels into master datasets</li>
<li>
<strong>Architecture</strong>: See
<code><a href="../articles/reference-architecture.html">vignette("reference-architecture")</a></code> for S3 class
details</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://orcid.org/0009-0006-4019-8703" class="external-link">JoonHo Lee</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
